# Các câu lệnh thường dùng trong Nova
## 1.Nova command
- List instance
```
root@controller:~# nova list
+--------------------------------------+-------------------+--------+------------+-------------+-------------------------+
| ID                                   | Name              | Status | Task State | Power State | Networks                |
+--------------------------------------+-------------------+--------+------------+-------------+-------------------------+
| fe1b5d9c-25ce-4131-bec9-38912c1d6975 | provider-instance | ACTIVE | -          | Running     | provider=192.168.10.101 |
+--------------------------------------+-------------------+--------+------------+-------------+-------------------------+
```
- List Flavor
```
root@controller:~# nova flavor-lsit
^C... terminating nova client
root@controller:~# nova flavor-listt
^C... terminating nova client
root@controller:~# nova flavor-list
+----+---------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
| ID | Name    | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | Description |
+----+---------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
| 0  | m1.nano | 64        | 0    | 0         |      | 1     | 1.0         | True      | -           |
+----+---------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
```
- Create Flavor
```
root@controller:~# nova flavor create --help
usage: nova [--version] [--debug] [--os-cache] [--timings]
            [--os-region-name <region-name>] [--service-type <service-type>]
            [--service-name <service-name>]
            [--os-endpoint-type <endpoint-type>]
            [--os-compute-api-version <compute-api-ver>]
            [--os-endpoint-override <bypass-url>] [--profile HMAC_KEY]
            [--insecure] [--os-cacert <ca-certificate>]
            [--os-cert <certificate>] [--os-key <key>] [--timeout <seconds>]
            [--collect-timing] [--os-auth-type <name>]
            [--os-auth-url OS_AUTH_URL] [--os-system-scope OS_SYSTEM_SCOPE]
            [--os-domain-id OS_DOMAIN_ID] [--os-domain-name OS_DOMAIN_NAME]
            [--os-project-id OS_PROJECT_ID]
            [--os-project-name OS_PROJECT_NAME]
            [--os-project-domain-id OS_PROJECT_DOMAIN_ID]
            [--os-project-domain-name OS_PROJECT_DOMAIN_NAME]
            [--os-trust-id OS_TRUST_ID]
            [--os-default-domain-id OS_DEFAULT_DOMAIN_ID]
            [--os-default-domain-name OS_DEFAULT_DOMAIN_NAME]
            [--os-user-id OS_USER_ID] [--os-username OS_USERNAME]
            [--os-user-domain-id OS_USER_DOMAIN_ID]
            [--os-user-domain-name OS_USER_DOMAIN_NAME]
            [--os-password OS_PASSWORD]
            <subcommand> ...
```
## 2. Openstack CLI Nova
### 2.1 Nova flavor
- List instance
```
root@controller:~# openstack server list
+--------------------------------------+-------------------+--------+-------------------------+--------+---------+
| ID                                   | Name              | Status | Networks                | Image  | Flavor  |
+--------------------------------------+-------------------+--------+-------------------------+--------+---------+
| fe1b5d9c-25ce-4131-bec9-38912c1d6975 | provider-instance | ACTIVE | provider=192.168.10.101 | cirros | m1.nano |
+--------------------------------------+-------------------+--------+-------------------------+--------+---------+
```
- List flavor
```
root@controller:~# openstack flavor list
+----+---------+-----+------+-----------+-------+-----------+
| ID | Name    | RAM | Disk | Ephemeral | VCPUs | Is Public |
+----+---------+-----+------+-----------+-------+-----------+
| 0  | m1.nano |  64 |    0 |         0 |     1 | True      |
+----+---------+-----+------+-----------+-------+-----------+
```
- Create flavor
```
root@controller:~# openstack flavor create --help
usage: openstack flavor create [-h] [-f {json,shell,table,value,yaml}]
                               [-c COLUMN] [--max-width <integer>]
                               [--fit-width] [--print-empty] [--noindent]
                               [--prefix PREFIX] [--id <id>] [--ram <size-mb>]
                               [--disk <size-gb>] [--ephemeral <size-gb>]
                               [--swap <size-mb>] [--vcpus <vcpus>]
                               [--rxtx-factor <factor>] [--public | --private]
                               [--property <key=value>] [--project <project>]
                               [--description <description>]
                               [--project-domain <project-domain>]
                               <flavor-name>
```

```
root@controller:~# . admin-openrc 
root@controller:~# openstack flavor create --ram 128 --vcpus 2 --id 2 m2.nano
+----------------------------+---------+
| Field                      | Value   |
+----------------------------+---------+
| OS-FLV-DISABLED:disabled   | False   |
| OS-FLV-EXT-DATA:ephemeral  | 0       |
| disk                       | 0       |
| id                         | 2       |
| name                       | m2.nano |
| os-flavor-access:is_public | True    |
| properties                 |         |
| ram                        | 128     |
| rxtx_factor                | 1.0     |
| swap                       |         |
| vcpus                      | 2       |
+----------------------------+---------+
root@controller:~# openstack flavor list
+----+---------+-----+------+-----------+-------+-----------+
| ID | Name    | RAM | Disk | Ephemeral | VCPUs | Is Public |
+----+---------+-----+------+-----------+-------+-----------+
| 0  | m1.nano |  64 |    0 |         0 |     1 | True      |
| 2  | m2.nano | 128 |    0 |         0 |     2 | True      |
+----+---------+-----+------+-----------+-------+-----------+
```
- Delete flavor
```
root@controller:~# openstack flavor list
+----+---------+-----+------+-----------+-------+-----------+
| ID | Name    | RAM | Disk | Ephemeral | VCPUs | Is Public |
+----+---------+-----+------+-----------+-------+-----------+
| 0  | m1.nano |  64 |    0 |         0 |     1 | True      |
| 2  | m2.nano | 128 |    0 |         0 |     2 | True      |
+----+---------+-----+------+-----------+-------+-----------+
root@controller:~# openstack flavor delete m2.nano
root@controller:~# openstack flavor list
+----+---------+-----+------+-----------+-------+-----------+
| ID | Name    | RAM | Disk | Ephemeral | VCPUs | Is Public |
+----+---------+-----+------+-----------+-------+-----------+
| 0  | m1.nano |  64 |    0 |         0 |     1 | True      |
+----+---------+-----+------+-----------+-------+-----------+
```
- Show flavor
```
root@controller:~# openstack flavor show m1.nano
+----------------------------+---------+
| Field                      | Value   |
+----------------------------+---------+
| OS-FLV-DISABLED:disabled   | False   |
| OS-FLV-EXT-DATA:ephemeral  | 0       |
| access_project_ids         | None    |
| disk                       | 0       |
| id                         | 0       |
| name                       | m1.nano |
| os-flavor-access:is_public | True    |
| properties                 |         |
| ram                        | 64      |
| rxtx_factor                | 1.0     |
| swap                       |         |
| vcpus                      | 1       |
+----------------------------+---------+
```
### 2.2 Nova keypair
- List Keypair
```
root@controller:~# . demo-openrc 
root@controller:~# openstack keypair list
+-------+-------------------------------------------------+
| Name  | Fingerprint                                     |
+-------+-------------------------------------------------+
| mykey | a4:24:21:2e:3c:e0:c1:c0:c1:07:68:49:80:52:16:7b |
+-------+-------------------------------------------------+
```
- Show Keypair
```
root@controller:~# openstack keypair show mykey
+-------------+-------------------------------------------------+
| Field       | Value                                           |
+-------------+-------------------------------------------------+
| created_at  | 2021-04-04T17:32:37.000000                      |
| deleted     | False                                           |
| deleted_at  | None                                            |
| fingerprint | a4:24:21:2e:3c:e0:c1:c0:c1:07:68:49:80:52:16:7b |
| id          | 1                                               |
| name        | mykey                                           |
| updated_at  | None                                            |
| user_id     | d6edf998b89045948cf5f19ebd905a95                |
```
- Create Keypair
```
root@controller:~# openstack keypair create key-test
-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAx3JI+UOU/I/knTDiKdk08VuaoFLlxtYOycgL5MW3nAXjIq5M
aY++C8GsSqnj3ncRS0phzQWrLwkSa5AJEXm7g86THhPhyp+XiBKuGZCUMeK6M0aN
FJdzkSf4SlYLRDKPo/Et88wPYQoxaIxiztEo4+Vi71nvJz3tfFkIRlPWlKtmGFYl
vZW3ToEti6uUZ/ofHRhpJSv2OUWDstVv86Y/hDv+IE80aWiN2uonQ64qW1M24bO5
Pirh1JdimAfPaSceFjojtXX3zWp5mWmDxBZIpjxRrJkGg1vPT5c+g8VU8CtOF7YN
iX8L9Gt7QvwDYTGLkRq9BOVefllOI+MgAObTxwIDAQABAoIBADjrDZZNSiR1sCmH
/NMykKBcoxkj7z06c4f0ViiYoFifeX25PkdV5UeXouK/7y7azg2tkZGgD4Vh0mbt
+RiKpA/ukR+hTuuzddw4cIUNNK2z5a2icbqxqiJ/xKT6P0bcIxAHUTTlRHJOJWGP
xtb86+111jE2ekC5tJ+rDOh9HpzYeEwkm4CbfoXuQpkyd2W3eRu8W7s3IYXcX3h8
kk7oAsl69mTgkNwcw/zKFNWFDZal4Q3Sc/phmYZDsGcOgq5UTgjgRw5/fuVlGS2f
bz1gQLICYk6X1A6rdMk8VqiF66Qv3UWndpmxJ51Q8D+xVDSpTUeujk2QUIy9lCrg
3hz4nFkCgYEA578Gd2V9N8CQnSHNqZZG0uSmDkIAmIF9m+OOcWxrq9BIXJyMSnHN
SatuEUpOsiA6URn3lW2n1bsl/p2zVU7h6ZnioU5yV3SB0O4qCw/Zx9bBpQ2YVHYT
mRH/F930P/rhrAnMAJLcV3W15hrSQLmmhk3f63rdzcWMyXfPGnb5faUCgYEA3FHh
UonEqN8jRQQHqAxeDbFGW0bGuXPdPXEGDJe0Ua5C1E/NuxPnbEvfN4cqLqLwYuAs
kqxJV2khJPojuaSSCt9vpEFIkMy01GCdUNymMruJA75G8f5lhkpH9N4eqUMmU4jx
QrLwmOTryqq8PzZP2YRim9PFJrzZQ0CvOddqp/sCgYEA0L2AvpTcyBYcbFyhWgqx
Oo6XgCo1TSj+EidTC5lEFptiQoED4J5G8f+HAe3zmoBq5thD6QW/ckXDQGedu850
sKxatT7qwRmBQMb1ecdKO7WV8Oyg9BrzJiJOqpnSwrphAUxFw5KFBAZT1LL+BSzz
8O8+LWYbWZiCaooPMuBNc70CgYBVhDqvbOY2nhX0jfHi2poPOoYSm9A636w6UwqE
DMZjBf7OpgM24Cztri2AQiivXXNtDZJ/g/wbv6Sr06PWRPii28NbwDNIcQynerDV
WC/ydTRjjZHAEHybuW1gsG66SGQx/G+Y8hfNYN3dFpRm/M/VoDsePP7DYH38Srk4
/FJbzQKBgFoglG4Tyg3b0dn9W7iwklwK1/2pD2oUjiQFqr4qW+nH8ujMD1d83Fde
qsaOBof1oS2UjD8H8KR201/YuR6nT0GDcdZbspotySOJkatEYsWsNA2h6wFAfvgF
8qDO1prLjJ+YrGtlIP9xOGPaa8SwrFwGkKWKCHXD0UW5KWh7PUHP
-----END RSA PRIVATE KEY-----

root@controller:~# openstack keypair list
+----------+-------------------------------------------------+
| Name     | Fingerprint                                     |
+----------+-------------------------------------------------+
| key-test | eb:08:0f:fa:c6:1c:de:2f:86:3d:b5:27:e1:c9:97:b5 |
| mykey    | a4:24:21:2e:3c:e0:c1:c0:c1:07:68:49:80:52:16:7b |
+----------+-------------------------------------------------+
```
- Delete Keypair
```
root@controller:~# openstack keypair delete key-test
root@controller:~# openstack keypair list
+-------+-------------------------------------------------+
| Name  | Fingerprint                                     |
+-------+-------------------------------------------------+
| mykey | a4:24:21:2e:3c:e0:c1:c0:c1:07:68:49:80:52:16:7b |
+-------+-------------------------------------------------+
```
### 2.3 Nova security group


__Docs__
- https://github.com/khanhnt99/thuctap012017/blob/master/XuanSon/OpenStack/Nova/docs/Nova%20command.md