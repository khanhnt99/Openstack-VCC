# Distributed Virtual Routers
## 1. Overview

![](https://i.ibb.co/VTyGVn6/Screenshot-from-2021-05-31-16-00-42.png)

- Ở mô hình này khi các instance ở các network khác nhau muốn giao tiếp với nhau đều phải thông qua router.
- Nếu không thể kết nối được tới router, các kết nối từ instance ra ngoài mạng hay tới các instance khác sẽ fail.
- Yêu cầu đặt ra các routẻ phải tách biệt ra trên từng node để tối ưu hóa hệ thống

## 2. Cấu hình
- https://docs.openstack.org/neutron/pike/admin/deploy-ovs-ha-dvr.html

![](https://i.ibb.co/SNnPm4W/Screenshot-from-2021-05-31-16-30-20.png)

![](https://i.ibb.co/yPhhvhN/Screenshot-from-2021-05-31-17-05-03.png)

## 3. Giải thích
- 3 Router namespace giống nhau xuất hiện trên 3 node: `network`, `compute1`, `compute2`
![](https://i.ibb.co/KGXbyZs/Screenshot-from-2021-05-31-22-38-29.png)

![](https://i.ibb.co/0JtdGLD/Screenshot-from-2021-05-31-22-39-16.png)

![](https://i.ibb.co/jRH2CWJ/Screenshot-from-2021-05-31-22-39-53.png)

- Với cùng 1 IP mà MAC interface trên nhiều compute node khác nhau sẽ dẫn đến hiện tượng `MAC flapping`