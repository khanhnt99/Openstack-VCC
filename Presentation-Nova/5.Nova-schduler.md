# Nova-scheduler
## 1. Tổng quan
- **Nova-schduler** service xác định compute node nào sẽ thực hiện chạy instance.
- **Nova--schduler** sử dụng `filter scheduler` để lập kế hoạch cho việc khởi tạo máy ảo. 
- `Filter scheduler` hỗ trợ 2 cơ chế `filtering` và `weighting` để có thể xác định được node compute chạy máy ảo.
- Khi **nova-scheduler** nhận được request sẽ thực hiện `filtering` các host compute, loại bỏ các host không phù hợp, sau đó sẽ thực hiện `weighting`, bằng cách sử dụng thuật toán sẽ lựa chọn ra node compute phù hợp nhất `(weight cao nhất)` để tạo máy ảo.

## 2. Filtering

![](https://github.com/trangnth/Timhieu_Openstack/raw/master/img/16.png)

- Trong quá trình làm việc, `Filter scheduler` lặp đi lặp lại trên node Compute được tìm thấy.
- Mỗi lần lặp sẽ đánh giá lại các host, tìm ra danh sách kết quả các node đủ điều kiện, sau đó được sắp xếp theo thứ tự bởi `weighting`.
- Scheduler sẽ dựa vào đó để chọn một host có `weight` cao nhất để launch instance.
- Có nhiều class filter chuẩn mà được sử dụng `(nova.scheduler.filter)`
  + https://docs.openstack.org/mitaka/config-reference/compute/scheduler.html

## 3. Weighting
- Là cách chọn máy chủ phù hợp nhất trừ một nhóm các máy chủ hợp lệ bằng cách tính toán và đưa ra trọng số `(weights)` cho tất cả các máy chủ trong danh sách.
- Để ưu tiên 1 weighter so hơn weighter khác, tất cả các weighter cần phải xác định hệ số nhân sẽ được áp dụng trước khi tính toán weight cho node.

![](https://github.com/trangnth/Timhieu_Openstack/raw/master/img/17.png)